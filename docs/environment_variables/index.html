<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Environment variables</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Cantara Â· Fullstack TypeScript React Apps in Minutes. Stop configuring, start coding."><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="There are two ways of passing in environment variables to your applications/tests:"><meta data-react-helmet="true" property="og:description" content="There are two ways of passing in environment variables to your applications/tests:"><meta data-react-helmet="true" property="og:url" content="https://cantara.js.org/docs/environment_variables">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.a1cef041.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/cantara.svg" alt="Cantara"><strong></strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/cantara.svg" alt="Cantara"><strong></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/quick_start">Quick Start</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/docs_intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installing_and_getting_ready">Installing and getting ready</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/initializing_a_new_project">Initializing a new project</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developing">Developing your app</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding_new_packages">Adding new apps/packages</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/testing_with_jest">Testing with Jest</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/environment_variables">Environment variables</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/building_packages_apps">Building packages/apps</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/deploying_serverless">Deploying serverless endpoints</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/publish_to_npm">Publishing packages to NPM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/continous_integration">Continous Integration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/live_link">ðŸ”— Live Link</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/raps">Runtime App Presets (RAPs)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/execute_arbitrary_cmds">Executing arbitrary commands for apps/packages</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/e2e_testing">E2E/Integration testing with Cypress</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/migrations">Migrating to newer Cantara versions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/css">CSS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/external_dependencies">Overwriding the External Dependencies Map for Webpack</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/css_modules_types">TypeScript + CSS Modules</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tailwindcss">How to use Tailwind CSS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/cantara_config_js">cantara_config_js</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/starter_templates">Official starter templates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">For maintainer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/maintainers_intro">Developing Cantara</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Environment variables</h1></header><div class="markdown"><p>There are two ways of passing in environment variables to your applications/tests:
Either throug the actual environment variables of the system Cantara is running on or through <code>.env</code> files.</p><p>Passing in environment variables through directly from the system is usally used in CI environments, whereas the use case of <code>.env</code> files is primarily in development environments, but that depends on your workflow.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="adding-a-new-environment-variable"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#adding-a-new-environment-variable" title="Direct link to heading">#</a>Adding a new environment variable</h2><p>The first step when adding a new environment variable is adding a new entry in the <code>env</code> array of the app&#x27;s <code>cantara.config.js</code>. Go to the <code>cantara.config.js</code> file of the app/package where the environment variable is needed. If there is no <code>cantara.config.js</code>, create a new one. It could look like that:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MY_ENV_VAR&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><em>Usually</em> when adding environment variables to packages it&#x27;s just because they are needed during tests.</p><p>By adding <code>MY_ENV_VAR</code> to this array, Cantara now knows that <code>MY_ENV_VAR</code> must be defined during execution and can warn the developer if that&#x27;s not the case.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="using-env-files"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-env-files" title="Direct link to heading">#</a>Using .env files</h2><p>Now, in the application folder create a new file called <code>.env.development</code> and add the folllowing content:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MY_ENV_VAR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">env_var_value123</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>When you now start the development of your app using the <code>dev</code> command, the value of <code>process.env.MY_ENV_VAR</code> will be <code>env_var_value123</code>. When executing the <code>test</code> or <code>e2e</code> command, Cantara will look if there is a file called <code>.env.test</code> in the app&#x27;s folder. If not, it will fall back to <code>.env</code>. For building/deploying, Cantara will look for a file called <code>.env.production</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="project-wide-env-files"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#project-wide-env-files" title="Direct link to heading">#</a>Project wide .env files</h3><p>If some env var values are needed in multiple applications, e.g. in two NodeJS APIs, you can create a <code>.env.&lt;stage&gt;</code> file in the project&#x27;s root. This way, you don&#x27;t need to define the env variable value twice.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="defining-environment-variables-manually"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#defining-environment-variables-manually" title="Direct link to heading">#</a>Defining environment variables manually</h2><p>Instead of creating those files, you can also define the environment variabled yourself by setting them in the current environment, e.g. your CI server. <strong>You need to prefix them</strong>, for example: If your CI system wants to run the <code>build</code> command for one of your apps and there&#x27;s a environment variable called <code>MY_ENV_VAR</code> required, define it by prefixing it with <code>PRODUCTION_</code>, this <code>PRODUCTION_MY_ENV_VAR</code>. This can also be done for the testing environment by setting <code>TEST_MY_ENV_VAR</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="the---stage-parameter"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the---stage-parameter" title="Direct link to heading">#</a>The --stage parameter</h2><p>By appending the <code>--stage</code> parameter to any Cantara command, you can explicitly define which <code>.env</code> file or which environment variables from the system should be used. For example if you execute <code>ctra dev my-app --stage production</code> the <code>.env.production</code> file will be used. You can also create custom stages, e.g. <code>.env.staging</code> and execute commands using those stages, e.g. <code>ctra build --stage staging</code>. This can be useful if you have other environments then just your local development environemnt and the production environment, e.g. a staging server.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="optional-environment-variables"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#optional-environment-variables" title="Direct link to heading">#</a>Optional Environment Variables</h2><p>By default cantara replaces all environment variables, specified in the <code>cantara.config.js</code>, with there value on build time. While this is a desierable behavior for frontend code, in nodejs applications running on a server, it may be expected to read environment varialbes on runtime direclty form the server environment.</p><p>To aceive this it is possible to mark environment varialbes as optional:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MY_ENV_VAR&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>This way cantara will replace the environment variable if it is defined on build (i.e. during development), but will leave it as is, if it is not defined (i.e. for production).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="setting-evironment-variables-directly-in-configuration"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-evironment-variables-directly-in-configuration" title="Direct link to heading">#</a>Setting Evironment Variables Directly in Configuration</h2><p>In some rare use cases it might not be possible to define environment varialbes in the .env files, but the values must be computed at build time. In this cases the value can be directly injected in the <code>cantara.config.js</code>. A common use case for this is the injection of the version from the <code>package.json</code> :</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> pkg </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./package.json&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;VERSION&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/CantaraJS/cantara/edit/master/docs/docs/environment_variables.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/testing_with_jest"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">Â« Testing with Jest</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/building_packages_apps"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Building packages/apps Â»</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#adding-a-new-environment-variable" class="contents__link">Adding a new environment variable</a></li><li><a href="#using-env-files" class="contents__link">Using .env files</a><ul><li><a href="#project-wide-env-files" class="contents__link">Project wide .env files</a></li></ul></li><li><a href="#defining-environment-variables-manually" class="contents__link">Defining environment variables manually</a></li><li><a href="#the---stage-parameter" class="contents__link">The --stage parameter</a></li><li><a href="#optional-environment-variables" class="contents__link">Optional Environment Variables</a></li><li><a href="#setting-evironment-variables-directly-in-configuration" class="contents__link">Setting Evironment Variables Directly in Configuration</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Links</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/docs_intro">Guides</a></li><li class="footer__item"><a class="footer__link-item" to="https://github.com/CantaraJS/cantara" href="https://github.com/CantaraJS/cantara">Github</a></li></ul></div></div><div class="text--center"></div></div></footer>
</div>

<script src="/styles.121d9d60.js"></script>

<script src="/runtime~main.e569b341.js"></script>

<script src="/main.3d440397.js"></script>

<script src="/1.879caf99.js"></script>

<script src="/2.12329067.js"></script>

<script src="/3.a9682ca4.js"></script>

<script src="/1be78505.f0160328.js"></script>

<script src="/20ac7829.22954aab.js"></script>

<script src="/17896441.8f2e7294.js"></script>

<script src="/0b2a20fc.e53a5e5f.js"></script>


</body>
</html>